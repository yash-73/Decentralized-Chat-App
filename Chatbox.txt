import {  useRef, useEffect } from "react";
import Messages from "../components/Messages";
import PropTypes from 'prop-types'

function ChatBox({messages}) {
  const bottomRef = useRef();


  let index = 0;


  useEffect(() => {
      // Scroll to the bottom whenever messages change
      bottomRef.current?.scrollIntoView({ behavior: "smooth" });
    }, [messages]);


  return (
    <div className="flex flex-col justify-end ">
      <div
        id="message-history"
        className=" flex flex-col justify-end w-full min-h-[400px] overflow-scroll "
      >
        {messages.map((message) => {
          index += 1;
          return (
            <Messages
              key={index}
              message={message}
              className="mx-4 my-2 px-4 py-2  w-fit rounded text-white font-semibold"
            />
          );
        })}
        <div ref={bottomRef}></div>
      </div>
      

      <div></div>
    </div>
  );
}

ChatBox.propTypes = {
    messages : PropTypes.array
}

export default ChatBox;
